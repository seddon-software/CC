set -v
# place the shared library in the default place (/usr/lib) and update the 
# kernel cache so it can be located.
# Note: you need to add sudo password for this to work
cd mylib
gcc -shared -fPIC -o libf1.so f1.c
sudo cp libf1.so /usr/lib
sudo chmod +x /usr/lib/libf1.so

#
# update the kernel cache
sudo ldconfig	# update cache
sudo ldconfig -p | grep libf1.so

#
# now link with libf1.so
cd ../src
gcc f_main.c f2.c f3.c -lf1 -o f.exe
f.exe

#
# clean up
sudo rm /usr/lib/libf1.so

